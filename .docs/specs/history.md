# 仕様書変更履歴

- 変更日時: 2026-01-13
- 変更内容の概要
  - eframe 内でホットキー・タスクトレイ処理を完結させる構成を見直し、アプリ層（src/app/\*）へ分離
  - Controller を追加し、UI から受け取った HWND とホットキー通知により表示/非表示を制御する方式へ変更
  - UI は最小 UI と HWND 通知に責務を限定し、起動処理は src/ui/native_runner.rs に集約
  - タスクトレイはファイル配置のみで、起動経路・Controller 連携は未実装として整理
- 変更理由

  - eframe の update ループ内に常駐系の処理（ホットキーやタスクトレイ）を抱えるのは無理があったため

- 変更日時: 2026-01-09 17:30
- 変更内容の概要
  - タスクトレイ（表示、終了）を実装済みとして仕様へ反映
  - UI 構成に src/ui/task_tray.rs を追記
  - ホットキー処理はウィンドウ表示/非表示の直接制御ではなく、アプリ側へトグル要求を通知する方式に更新
  - ウィンドウ非表示中でもイベント処理が継続するよう、一定間隔で update を起こす仕様を追記
- 変更理由

  - 最新コミットの実装結果を仕様として反映するため

- 変更日時: 2026-01-08 16:45
- 変更内容の概要
  - UI モジュールの名称を整理（launcher.rs を app.rs、initialize.rs を startup.rs へ変更）
  - UI 起動経路を ui::startup::startup に統一し、runnner.rs を削除して startup.rs に統合
- 変更理由

  - 最新コミットの実装結果を仕様として反映するため

- 変更日時: 2026-01-08 16:30
- 変更内容の概要
  - グローバルホットキー（Alt+Space）による UI の表示/非表示切り替えを実装済みとして仕様に反映
  - UI モジュール構成に src/ui/hotkey.rs と src/ui/runnner.rs を追記
- 変更理由

  - 最新コミットの実装結果を仕様として反映するため

- 変更日時: 2026-01-08 10:35
- 変更内容の概要
  - 引数なし起動時に UI を起動する仕様へ更新
  - UI 実装の配置を src/ui.rs から src/ui/\* のモジュール構成へ更新
  - 設定読み込み結果を Commands ではなく Settings として扱う仕様へ更新
  - ログレベルの仕様を更新（Debug ビルドは Info、Release ビルドは Warn）
- 変更理由

  - 最新コミットの実装結果を仕様として反映するため

- 変更日時: 2025-12-30 16:32
- 変更内容の概要
  - local_commands.yaml によるローカル専用コマンドの追加定義を仕様に追記
  - local_commands.yaml が存在しない場合は無視する仕様を追記
  - 同名コマンドがある場合は local_commands.yaml 側を優先する仕様を追記
  - ログレベルの仕様を更新（Debug ビルドは Debug、Release ビルドは Info）
- 変更理由

  - 最新コミットの実装結果を仕様として反映するため

- 変更日時: 2025-12-23 13:58
- 変更内容の概要
  - 設定パス解決（config_dir/setting.yaml/env.yaml）を paths モジュールから config 側へ集約
  - 設定の読み込み結果を Settings ではなく Commands として扱う構成へ変更
  - env.yaml のスキーマを env 配下にマップを持つ形式へ変更
  - 簡易 CLI の `settings` を廃止し `list` に変更
- 変更理由

  - 最新コミットの実装結果を仕様として反映するため

- 変更日時: 2025-12-22 16:58
- 変更内容の概要
  - env.yaml を子プロセスへ渡す環境変数ではなく、設定の $ 置換用変数として定義する仕様に変更
  - CommandSpec から cwd を削除
  - 簡易 CLI の `paths` を廃止し、`settings` を追加
  - 引数なし起動時の UI 起動を無効化中であることを仕様に反映
  - 設定サンプルを `.docs/.config/` に配置することを追記
- 変更理由

  - 最新コミットの実装結果を仕様として反映するため

- 変更日時: 2025-12-22 14:23
- 変更内容の概要
  - 仕様書（project.md）に最小 UI（eframe/egui）を追記
  - 引数なし起動時に UI を起動する仕様を追記
- 変更理由
  - コーディング計画に基づき、手順 3（最小 UI）の実装結果を仕様として反映するため
- 参照したコーディング計画ファイル名

  - `2025122117-実装順序見直し.md`

- 変更日時: 2025-12-21 17:00
- 変更内容の概要
  - 仕様書（project.md）にログ出力方法と main 構成の仕様を追記
- 変更理由

  - 最新コミットの実装結果を仕様として反映するため

- 変更日時: 2025-12-20 20:23
- 変更内容の概要
  - 仕様書（project.md）を新規作成
  - 設定読み込みとコマンド実行の現時点の仕様を記載
- 変更理由
  - コーディング計画の実装結果（手順 1〜2）を仕様として反映するため
- 参照したコーディング計画ファイル名
  - `2025122018-コマンドランチャー基本機能.md`
