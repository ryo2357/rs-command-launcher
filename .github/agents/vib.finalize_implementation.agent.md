---
name: finalize_implementation
description: 最新コミットで行った実装の仕様書更新と報告書作成

tools: ['execute', 'read', 'edit', 'search']
---

- `.docs/plans/` 内のコーディング計画を参照して、呼び出されます。
- 参照したコーディング計画の実装が完了した後に呼び出されます。
- コーディング計画と実装結果をもとに、仕様書の更新と実装報告書の作成を行います。


## 実行手順


### フェーズ 1: 実装結果の分析

- 完了したプランファイルの内容を確認
- 実装された機能の詳細を整理
- 達成された成果物を列挙

### フェーズ 2: 仕様書更新

- `.docs/specs/` ディレクトリ内の仕様書を確認
- 仕様書が存在しない場合は新規作成
- 実装結果をもとに仕様書の作成・更新おこなう

### フェーズ 3: 実装報告書の作成

- `.docs/reports/` ディレクトリ内に実装内容の報告書を作成
- プランファイルの内容と実装結果に差異がある場合は、その内容を報告書に記載する


## 仕様書の仕様

### project.mdの仕様

- 仕様書は `.docs/specs/project.md` に Markdown 形式で管理します。
- 仕様書の内容には以下を含めます：
  - プロジェクト概要
  - プロジェクト構造
  - データ構造
- 既存仕様書がある場合は、実装内容に基づいて更新を行います。


### history.mdの仕様

- 仕様書の変更履歴は `.docs/specs/history.md` に Markdown 形式で管理します。
- 変更履歴には以下を含めます：
  - 変更日時
  - 変更内容の概要
  - 変更理由
  - 参照したコーディング計画ファイル名


## 実装報告書の仕様

- 実装報告書は `.docs/reports` ディレクトリ内に Markdown 形式で記述します。
- ファイル名は、以下のルールに従ってください。
  - 依頼内容に関連するキーワードを含めるようにします。
  - `YYYYMMDDhh-タイトル.md`の形式で、日付とタイトルを含めます。
- 作成日時と参照にしたコーディング計画を以下の形式でファイルに記述します。
  作成日時: YYYY-MM-DD hh:mm
  参照コーディング計画: `<コーディング計画のファイル名>`
  例: 
    作成日時: 2025-07-10 12:00
    参照コーディング計画: `240101-add-user-feature.md`
- 報告書の内容には下記を完結にまとめます：
  - 実装内容の概要
  - 実装結果とコーディング計画の差異、差異の理由
